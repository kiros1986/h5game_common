function addEvent(a,b,c,d){if(a.addEventListener){a.addEventListener(b,c,d)}else{if(a.attachEvent){a.attachEvent("on"+b,c)}else{a["on"+b]=c}}}function GetQueryString(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");var c=window.location.search.substr(1).match(b);if(null!=c){return unescape(c[2])}return null}var runEval=function(a){if(a){eval(a.code)}};var goHome=function(a){if("undefined"!=typeof h5MoreGames){h5MoreGames()}else{window.location.href=a.url||"http://h5.appgame.com/"}};var guanZhu=function(a){if("undefined"!=typeof h5GuanZhu){h5GuanZhu()}};var showShare=function(a){alert(h5WxData.title+"猛戳右上角和朋友圈炫耀下！")};var setShareButtonPosition=function(a){if("undefined"!=typeof a.y){setShareBtnPosition(a.y)}};var updateShare=function(a){if("undefined"!=typeof a.title){h5WxData.title=a.title;document.title=h5WxData.title}if("undefined"!=typeof a.desc){h5WxData.desc=a.desc}if("undefined"!=typeof a.link){h5WxData.link=a.link}};var updateData=function(a){if("undefined"!=typeof sendScore){sendScore(a.level||0,a.score||0,postId)}};var setHorizontal=function(a){console.log("setHorizontal----->")};function onMessage(a){var b={runEval:runEval,goHome:goHome,updateShare:updateShare,updateData:updateData,guanZhu:guanZhu,showShare:showShare,setHorizontal:setHorizontal,setShareButtonPosition:setShareButtonPosition,};switch(a.data.opType){case"fun":console.log(a.data.value.name,a.data.value.args);try{b[a.data.value.name].apply(window,a.data.value.args)}catch(c){console.log(c)}break;default:console.log(a)}}addEvent(window,"message",onMessage,false);window.onload=function(){var a=document.getElementById("iframepage").src;var b=a.lastIndexOf("index.html");if(b==-1){b=a.lastIndexOf("?");if(index==-1){console.log(a[a.length-1]);if("/"!=a[a.length-1]){a+="/"}}}var c=(b==-1?a:a.substr(0,b))+"icon.jpg";h5WxData=h5WxData||{};h5WxData.imgUrl=encodeURI(c);var d=a.lastIndexOf("com")+4;h5WxData.link="http://h5.appgame.com/"+a.substr(d,b-d);h5WxData.title=document.title;h5WxData.desc="任玩小游戏，无需下载，一触即玩!";postId=parseInt(GetQueryString("postid"))};